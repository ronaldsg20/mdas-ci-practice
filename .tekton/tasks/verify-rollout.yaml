apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: verify-rollout
  namespace: rylangraham02-dev
spec:
  params:
    - name: deployment-name
      type: string
      description: Name of the deployment to verify
    - name: namespace
      type: string
      description: Namespace of the deployment

  steps:
    - name: verify
      image: quay.io/openshift/origin-cli:latest
      script: |
        #!/bin/bash
        set -e
        
        echo "Verifying rollout of $(params.deployment-name) in $(params.namespace)"
        
        # Wait for rollout to complete
        oc rollout status deployment/$(params.deployment-name) -n $(params.namespace) --timeout=5m
        
        # Check pod status
        oc get pods -n $(params.namespace) -l app=mdas-ci-practice
        
        echo "Deployment verified successfully"
