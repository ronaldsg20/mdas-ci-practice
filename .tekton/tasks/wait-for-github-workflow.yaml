apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: wait-for-github-workflow
  namespace: rylangraham02-dev
spec:
  params:
    - name: repo-owner
      type: string
    - name: repo-name
      type: string
    - name: workflow-name
      type: string
    - name: git-sha
      type: string

  steps:
    - name: wait
      image: curlimages/curl:latest
      script: |
        #!/bin/sh
        set -e
        
        echo "Waiting for GitHub workflow '$(params.workflow-name)' to complete for commit $(params.git-sha)"
        
        # Simple wait - in production, you'd query GitHub API
        # For now, just wait a reasonable time for Docker build
        echo "Waiting 3 minutes for Docker build to complete..."
        sleep 180
        
        echo "Proceeding with deployment"
